# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Login –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üö® **–í–ê–ñ–ù–û: –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∏—Å—á–µ–∑–∞—é—â–∏–º –æ–∫–Ω–æ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**

–ï—Å–ª–∏ –æ–∫–Ω–æ Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∏ –∏—Å—á–µ–∑–∞–µ—Ç –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–≤–æ–¥–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

### 1. **–î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω –≤ BotFather (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)**

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É @BotFather –∫–æ–º–∞–Ω–¥—É:
```
/setdomain
```

–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –±–æ—Ç `SuperMock_bot` –∏ –¥–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω:
```
app.supermock.ru
```

### 2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞**

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```
/mybots
```

–í—ã–±–µ—Ä–∏—Ç–µ `SuperMock_bot` ‚Üí `Bot Settings` ‚Üí `Domain` –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–º —É–∫–∞–∑–∞–Ω `app.supermock.ru`

### 3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –±–æ—Ç–∞**

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω –∏ –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω:
```
/start
```

## üîß **–¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞:**

- **–ò–º—è –±–æ—Ç–∞:** `SuperMock_bot`
- **ID –±–æ—Ç–∞:** `8464088869`
- **–î–æ–º–µ–Ω:** `app.supermock.ru`
- **–¢–æ–∫–µ–Ω:** `8464088869:AAFcZb7HmYQJa6vaYjfTDCjfr187p9hhk2o`

## üìã **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫:**

1. **–î–æ–º–µ–Ω –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ BotFather** ‚úÖ
2. **–ë–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç** ‚úÖ
3. **–ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–æ–≤ —Ä–µ–∫–ª–∞–º—ã** ‚úÖ
4. **CSP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã** ‚úÖ

## üêõ **–û—Ç–ª–∞–¥–∫–∞:**

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –õ–æ–≥–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ CSP
- –õ–æ–≥–∏ nginx –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ –≤ BotFather

---

## üìö **–û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã Telegram Login Widget:

1. **–î–æ–º–µ–Ω –∏ –ø–æ—Ä—Ç:**
   - –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–∞—Ö (–Ω–µ localhost)
   - –¢—Ä–µ–±—É–µ—Ç –ø–æ—Ä—Ç 80/443 (HTTPS)
   - –î–æ–º–µ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –≤ BotFather

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ BotFather:**
   - –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/setdomain` –±–æ—Ç—É @BotFather
   - –í—ã–±—Ä–∞—Ç—å –≤–∞—à –±–æ—Ç
   - –î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä: `yourdomain.com`)

3. **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ngrok –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ URL
   - –î–æ–±–∞–≤–∏—Ç—å ngrok URL –≤ BotFather
   - –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å hosts —Ñ–∞–π–ª —Å —Ç–µ—Å—Ç–æ–≤—ã–º –¥–æ–º–µ–Ω–æ–º

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ hosts —Ñ–∞–π–ª–∞ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```bash
# /etc/hosts (Linux/Mac) –∏–ª–∏ C:\Windows\System32\drivers\etc\hosts (Windows)
127.0.0.1 yourdomain.local
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```nginx
server {
    listen 80;
    server_name yourdomain.local;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```bash
# 1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å hosts —Ñ–∞–π–ª
sudo nano /etc/hosts

# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å nginx
sudo systemctl restart nginx

# 3. –î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω –≤ BotFather
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å /setdomain –∏ —É–∫–∞–∑–∞—Ç—å yourdomain.local

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
curl -H "Host: yourdomain.local" http://localhost
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–æ—Ç–∞:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞
curl "https://api.telegram.org/bot${BOT_TOKEN}/getMe"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
curl "https://api.telegram.org/bot${BOT_TOKEN}/getWebhookInfo"
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
# .env —Ñ–∞–π–ª
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_BOT_ID=your_bot_id_here
VITE_TELEGRAM_BOT_NAME=your_bot_name
VITE_TELEGRAM_BOT_ID=your_bot_id
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç React:

```tsx
import { TelegramLoginButton } from 'react-telegram-login';

function TelegramLogin() {
  const handleAuth = (user) => {
    console.log('–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω:', user);
  };

  return (
    <TelegramLoginButton
      dataOnauth={handleAuth}
      botName="your_bot_name"
      dataSize="large"
      dataRadius="8"
      dataRequestAccess="write"
      dataUserpic="false"
      dataLang="ru"
    />
  );
}
```

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è:

1. **"Widget not found"**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º—è –±–æ—Ç–∞ –≤ `botName`
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –±–æ—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∞–∫—Ç–∏–≤–µ–Ω

2. **"Domain not allowed"**
   - –î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω –≤ BotFather —á–µ—Ä–µ–∑ `/setdomain`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª (http/https)

3. **"CSP violation"**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Content Security Policy –¥–ª—è telegram.org
   - –†–∞–∑—Ä–µ—à–∏—Ç—å frame-src –¥–ª—è telegram.org

4. **"Port not allowed"**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Ä—Ç—ã 80 –∏–ª–∏ 443
   - –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ngrok

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:

- [Telegram Login Widget Documentation](https://core.telegram.org/widgets/login)
- [BotFather Commands](https://core.telegram.org/bots#botfather)
- [Telegram Bot API](https://core.telegram.org/bots/api)
