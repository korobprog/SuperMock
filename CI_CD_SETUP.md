# CI/CD Setup Guide

## Необходимые GitHub Secrets

Для работы CI/CD pipeline необходимо настроить следующие секреты в GitHub репозитории:

### 1. Перейдите в настройки репозитория
- Откройте ваш репозиторий на GitHub
- Перейдите в Settings → Secrets and variables → Actions
- Нажмите "New repository secret"

### 2. Добавьте следующие секреты:

#### `DEPLOY_HOST`
```
217.198.6.238
```

#### `DEPLOY_USER`
```
root
```

#### `DEPLOY_SSH_KEY`
```
-----BEGIN OPENSSH PRIVATE KEY-----
[Содержимое вашего SSH ключа для сервера]
-----END OPENSSH PRIVATE KEY-----
```

#### `DEPLOY_PATH`
```
/opt/mockmate
```

### 3. Проверка секретов

После добавления секретов, вы можете запустить деплой одним из способов:

#### Автоматический деплой
- Просто запушьте изменения в ветку `main`
- GitHub Actions автоматически запустит деплой

#### Ручной запуск
- Перейдите в Actions → Deploy to Production Server
- Нажмите "Run workflow"
- Выберите ветку и окружение

### 4. Проверка статуса

После запуска деплоя вы можете:
- Отслеживать прогресс в разделе Actions
- Проверить логи каждого этапа
- Получить уведомления об успехе/ошибке

### 5. Troubleshooting

Если деплой не работает:

1. **Проверьте секреты** - убедитесь, что все секреты добавлены правильно
2. **Проверьте SSH доступ** - убедитесь, что ключ работает
3. **Проверьте права доступа** - убедитесь, что пользователь имеет права на сервере
4. **Проверьте логи** - в разделе Actions есть подробные логи каждого этапа

### 6. Структура деплоя

Pipeline выполняет следующие этапы:
1. **Build and Test** - сборка и тестирование кода
2. **Build Docker Images** - создание Docker образов
3. **Deploy to Production** - деплой на сервер
4. **Notify** - уведомления о результате

### 7. Мониторинг

После успешного деплоя проверьте:
- https://supermock.ru (Лендинг)
- https://app.supermock.ru (Приложение)
- https://api.supermock.ru (API)
