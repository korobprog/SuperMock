# Функциональность вопросов интервью

## Описание

Реализована система управления вопросами интервью с возможностью оценки ответов кандидатов интервьюером.

## Основные возможности

### Для интервьюера:
1. **Просмотр всех вопросов** - интервьюер видит полный список вопросов для выбранной профессии
2. **Отметка заданных вопросов** - возможность отметить вопросы, которые были заданы кандидату
3. **Оценка ответов** - постановка оценок от 1 до 5 звезд за каждый заданный вопрос
4. **Статистика в реальном времени** - отображение прогресса заданных и оцененных вопросов

### Для кандидата:
1. **Просмотр только заданных вопросов** - кандидат видит только те вопросы, которые задал интервьюер
2. **Отображение оценок** - кандидат может видеть оценки за свои ответы (если интервьюер их поставил)
3. **Статус ожидания** - индикатор того, что интервьюер еще не задал вопросы

## Техническая реализация

### База данных

Добавлена новая таблица `question_ratings`:

```sql
CREATE TABLE question_ratings (
  id SERIAL PRIMARY KEY,
  session_id TEXT NOT NULL,
  question_index INTEGER NOT NULL,
  question_text TEXT NOT NULL,
  is_asked BOOLEAN DEFAULT FALSE,
  rating INTEGER,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(session_id, question_index)
);
```

### API Endpoints

1. **POST /api/question-ratings** - сохранение/обновление оценки вопроса
   ```json
   {
     "sessionId": "string",
     "questionIndex": 0,
     "questionText": "string",
     "isAsked": true,
     "rating": 5
   }
   ```

2. **GET /api/question-ratings/:sessionId** - получение всех оценок для сессии
   ```json
   {
     "questionRatings": [
       {
         "id": 1,
         "sessionId": "string",
         "questionIndex": 0,
         "questionText": "string",
         "isAsked": true,
         "rating": 5
       }
     ]
   }
   ```

### Компоненты

1. **InterviewQuestions** (`frontend/src/components/ui/interview-questions.tsx`)
   - Основной компонент для отображения вопросов
   - Различный интерфейс для интервьюера и кандидата
   - Интерактивные элементы для отметки и оценки

2. **QuestionsStats** (`frontend/src/components/ui/questions-stats.tsx`)
   - Компонент статистики в реальном времени
   - Прогресс-бары для заданных и оцененных вопросов
   - Средняя оценка

3. **InterviewResults** (`frontend/src/components/ui/interview-results.tsx`)
   - Компонент для отображения результатов интервью
   - Детальная статистика по вопросам
   - Интеграция с фидбеком

4. **InterviewResultsPage** (`frontend/src/pages/InterviewResults.tsx`)
   - Страница для просмотра результатов интервью
   - Доступ по URL `/results?sessionId=...`

## Использование

### В интервью

1. **Интервьюер**:
   - Открывает вкладку "Вопросы"
   - Видит список всех доступных вопросов
   - Кликает на кружок рядом с вопросом, чтобы отметить его как заданный
   - После отметки появляется возможность поставить оценку (1-5 звезд)
   - Видит статистику в реальном времени

2. **Кандидат**:
   - Открывает вкладку "Вопросы"
   - Видит только те вопросы, которые задал интервьюер
   - Может видеть оценки за свои ответы
   - Видит статус ожидания, если вопросы еще не заданы

### После интервью

1. При завершении интервью появляется кнопка "Посмотреть результаты"
2. Переход на страницу `/results?sessionId=...`
3. Отображение полной статистики:
   - Количество заданных вопросов
   - Средняя оценка
   - Детальный список вопросов с оценками
   - Фидбек от интервьюера (для кандидата)

## Интеграция

### С существующей системой

- Интегрируется с существующей системой вопросов по профессиям
- Использует существующую систему сессий
- Совместима с AI-генерацией вопросов
- Работает с существующей системой фидбека

### Безопасность

- Проверка авторизации пользователя для доступа к сессии
- Валидация роли пользователя (интервьюер/кандидат)
- Защита от несанкционированного доступа к данным

## Будущие улучшения

1. **Уведомления** - уведомления кандидату о новых вопросах
2. **Экспорт результатов** - возможность экспорта результатов в PDF
3. **Шаблоны вопросов** - создание и сохранение шаблонов вопросов
4. **Аналитика** - детальная аналитика по вопросам и ответам
5. **Категории оценок** - оценка по разным критериям (технические навыки, коммуникация и т.д.)
