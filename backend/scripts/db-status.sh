#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é backend
cd "$(dirname "$0")/.." || exit

echo "=== –°—Ç–∞—Ç—É—Å –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö ==="
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
echo "–¢–µ—Å—Ç–æ–≤–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (DEV):"
if docker ps | grep -q "mongo-dev"; then
  echo "‚úÖ MongoDB (—Ç–µ—Å—Ç–æ–≤–∞—è): –ó–∞–ø—É—â–µ–Ω–∞"
else
  echo "‚ùå MongoDB (—Ç–µ—Å—Ç–æ–≤–∞—è): –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
fi

if docker ps | grep -q "redis-dev"; then
  echo "‚úÖ Redis (—Ç–µ—Å—Ç–æ–≤–∞—è): –ó–∞–ø—É—â–µ–Ω"
else
  echo "‚ùå Redis (—Ç–µ—Å—Ç–æ–≤–∞—è): –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
fi

echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–¥–∞–∫—à–µ–Ω –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
echo "–ü—Ä–æ–¥–∞–∫—à–µ–Ω –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PROD):"
if docker ps | grep -q "mongo-prod"; then
  echo "‚úÖ MongoDB (–ø—Ä–æ–¥–∞–∫—à–µ–Ω): –ó–∞–ø—É—â–µ–Ω–∞"
else
  echo "‚ùå MongoDB (–ø—Ä–æ–¥–∞–∫—à–µ–Ω): –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
fi

if docker ps | grep -q "redis-prod"; then
  echo "‚úÖ Redis (–ø—Ä–æ–¥–∞–∫—à–µ–Ω): –ó–∞–ø—É—â–µ–Ω"
else
  echo "‚ùå Redis (–ø—Ä–æ–¥–∞–∫—à–µ–Ω): –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
fi

echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
echo "–¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:"
if grep -q "supermock_dev" .env; then
  echo "üîπ –ê–∫—Ç–∏–≤–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ä–µ–¥–∞ (DEV)"
elif grep -q "supermock_prod" .env; then
  echo "üî∏ –ê–∫—Ç–∏–≤–Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω —Å—Ä–µ–¥–∞ (PROD)"
else
  echo "‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è"
fi

echo ""
echo "–î–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ä–µ–¥—É –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: ./scripts/db-dev.sh"
echo "–î–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω —Å—Ä–µ–¥—É –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: ./scripts/db-prod.sh"