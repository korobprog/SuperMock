# Настройка Redis для масштабирования WebSocket-серверов

Для обеспечения масштабируемости WebSocket-серверов необходимо настроить Redis в качестве адаптера для Socket.IO. Это позволит синхронизировать события между несколькими экземплярами сервера.

## Шаги по настройке

1. Установите необходимые пакеты:

```bash
npm install @socket.io/redis-adapter redis
```

2. Обновите файл `websocket.js`, добавив поддержку Redis-адаптера (код уже подготовлен).

3. Убедитесь, что Redis-сервер запущен и доступен по указанному адресу и порту.

## Конфигурация Redis

По умолчанию код настроен на подключение к Redis по адресу `localhost` и порту `6379`. Если ваш Redis-сервер находится на другом хосте или использует другой порт, измените соответствующие параметры в файле `websocket.js`.

## Переменные окружения

Для гибкой настройки рекомендуется использовать переменные окружения:

- `REDIS_HOST` - хост Redis-сервера (по умолчанию: localhost)
- `REDIS_PORT` - порт Redis-сервера (по умолчанию: 6379)
- `REDIS_PASSWORD` - пароль для аутентификации в Redis (если требуется)

## Тестирование масштабирования

Для тестирования масштабирования запустите несколько экземпляров сервера на разных портах:

```bash
PORT=3001 node server.js
PORT=3002 node server.js
PORT=3003 node server.js
```

Затем проверьте, что события WebSocket корректно передаются между экземплярами.
