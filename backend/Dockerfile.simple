# Simple Backend Dockerfile
FROM node:20-alpine

WORKDIR /app

# Copy backend files
COPY . ./backend

# Install dependencies
WORKDIR /app/backend
RUN npm install

# Generate Prisma client
RUN npx prisma generate

ENV NODE_ENV=production
ENV PORT=3000
EXPOSE 3000

# Run the production server
CMD ["node", "server/index.mjs"]
