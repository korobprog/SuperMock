# üîê –ü—Ä–æ—Å—Ç–∞—è Telegram –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è - README

## üìã –û–±–∑–æ—Ä

–°–æ–∑–¥–∞–Ω–∞ –ø—Ä–æ—Å—Ç–∞—è –∏ —Ä–∞–±–æ—á–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram –¥–ª—è –≤–µ–±-–≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Telegram Login Widget –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —á–µ—Ä–µ–∑ –≤–∏–¥–∂–µ—Ç, —Ç–∞–∫ –∏ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## üöÄ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **Telegram Login Widget** - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –≤–∏–¥–∂–µ—Ç –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- **JWT —Ç–æ–∫–µ–Ω—ã** - –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ store
- **–§–æ—Ä–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ API –±–µ–∑ –≤–∏–¥–∂–µ—Ç–∞

### ‚úÖ Backend endpoints
- `POST /api/telegram-auth-callback` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç –≤–∏–¥–∂–µ—Ç–∞
- `GET /api/telegram-auth-callback` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ GET callback (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
- `GET /api/telegram-test` - —Ç–µ—Å—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- `GET /api/telegram-bot-check` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–æ—Ç–∞

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. **–û—Å–Ω–æ–≤–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/telegram-auth-test` –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `TelegramLoginSimple`:

```tsx
import { TelegramLoginSimple } from '@/components/ui/telegram-login-simple';

<TelegramLoginSimple
  onAuth={(user) => console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω:', user)}
  onLogout={() => console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã—à–µ–ª')}
/>
```

### 2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API**
–ù–∞ —Ç–æ–π –∂–µ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –µ—Å—Ç—å —Ñ–æ—Ä–º–∞ `TelegramAuthForm` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

### 3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –¥—Ä—É–≥–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
```tsx
import { TelegramLoginSimple } from '@/components/ui/telegram-login-simple';
import { useAppStore } from '@/lib/store';

function MyComponent() {
  const { telegramUser, setTelegramUser } = useAppStore();
  
  return (
    <div>
      {!telegramUser ? (
        <TelegramLoginSimple
          onAuth={setTelegramUser}
          onLogout={() => setTelegramUser(null)}
        />
      ) : (
        <div>–ü—Ä–∏–≤–µ—Ç, {telegramUser.first_name}!</div>
      )}
    </div>
  );
}
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Backend)
```bash
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_BOT_ID=your_bot_id_here
JWT_SECRET=your_jwt_secret_here
FRONTEND_URL=https://app.supermock.ru
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Frontend)
```bash
VITE_TELEGRAM_BOT_NAME=your_bot_name
VITE_TELEGRAM_BOT_ID=your_bot_id
VITE_API_URL=https://api.supermock.ru
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ BotFather
1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/botfather)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/setdomain`
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
4. –î–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω: `app.supermock.ru`

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Telegram"**
2. **–û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è Telegram –≤–∏–¥–∂–µ—Ç**
3. **–ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ `/api/telegram-auth-callback`**
4. **Backend –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ HMAC-SHA256**
5. **–°–æ–∑–¥–∞–µ—Ç—Å—è/–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JWT —Ç–æ–∫–µ–Ω**
6. **Frontend –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ store**

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. **–ß–µ—Ä–µ–∑ –≤–∏–¥–∂–µ—Ç**
- –û—Ç–∫—Ä–æ–π—Ç–µ `/telegram-auth-test`
- –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –≤–∏–¥–∂–µ—Ç Telegram
- –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ Telegram

### 2. **–ß–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É**
- –ù–∞ —Ç–æ–π –∂–µ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è –∏ –Ω–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞

### 3. **API endpoints**
```bash
# –¢–µ—Å—Ç API
curl https://api.supermock.ru/api/telegram-test

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ—Ç–∞
curl https://api.supermock.ru/api/telegram-bot-check
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–±–ª–µ–º—ã —Å –≤–∏–¥–∂–µ—Ç–æ–º
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–º–µ–Ω –≤ BotFather**
2. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω**
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏**

### –ü—Ä–æ–±–ª–µ–º—ã —Å API
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend**
2. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã**
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å endpoints**

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
Backend –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ —ç—Ç–∞–ø—ã:
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **HMAC-SHA256 –≤–∞–ª–∏–¥–∞—Ü–∏—è** –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –æ—Ç Telegram
- **JWT —Ç–æ–∫–µ–Ω—ã** —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º —Å—Ä–æ–∫–æ–º –¥–µ–π—Å—Ç–≤–∏—è (30 –¥–Ω–µ–π)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π**
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### Backend
- `backend/src/routes/telegram-auth.ts` - –æ—Å–Ω–æ–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã

### Frontend
- `frontend/src/components/ui/telegram-login-simple.tsx` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- `frontend/src/components/ui/telegram-auth-form.tsx` - —Ñ–æ—Ä–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `frontend/src/pages/TelegramAuthTest.tsx` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üöÄ –î–µ–ø–ª–æ–π

1. **–ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
   ```bash
   git add .
   git commit -m "feat: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ—Å—Ç–∞—è Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è"
   git push origin main
   ```

2. **GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è**

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –Ω–∞ `/telegram-auth-test`**

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ BotFather
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ API

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–æ—Å—Ç–∞—è –∏ —Ä–∞–±–æ—á–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram, –∫–æ—Ç–æ—Ä–∞—è:
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –≤–∏–¥–∂–µ—Ç–æ–º
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç JWT —Ç–æ–∫–µ–Ω—ã
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –ò–º–µ–µ—Ç —Ñ–æ—Ä–º—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ —ç—Ç–∞–ø—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏