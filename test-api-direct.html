<!DOCTYPE html>
<html>
<head>
    <title>API Test</title>
    <meta charset="UTF-8">
</head>
<body>
    <h1>Тест API для проверки слотов</h1>
    
    <div>
        <h2>Тест для кандидата (UTC+10)</h2>
        <button onclick="testCandidateAPI()">Проверить API кандидата</button>
        <div id="candidate-result"></div>
    </div>

    <div>
        <h2>Тест для интервьюера (UTC+10)</h2>
        <button onclick="testInterviewerAPI()">Проверить API интервьюера</button>
        <div id="interviewer-result"></div>
    </div>

    <script>
        async function testCandidateAPI() {
            const resultDiv = document.getElementById('candidate-result');
            resultDiv.innerHTML = 'Загрузка...';
            
            try {
                const response = await fetch('https://api.supermock.ru/api/slots/enhanced?role=candidate&profession=frontend&language=ru&timezone=Asia/Vladivostok');
                const data = await response.json();
                
                let html = '<h3>Результат:</h3>';
                html += '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
                
                // Показываем слоты с интервьюерами
                const slotsWithInterviewers = data.slots.filter(slot => slot.count > 0);
                if (slotsWithInterviewers.length > 0) {
                    html += '<h3>Слоты с интервьюерами:</h3>';
                    slotsWithInterviewers.forEach(slot => {
                        html += `<p><strong>${slot.time}</strong> (UTC: ${slot.utcTime}) - ${slot.count} интервьюер(ов)</p>`;
                    });
                } else {
                    html += '<p><strong>Нет слотов с интервьюерами!</strong></p>';
                }
                
                resultDiv.innerHTML = html;
            } catch (error) {
                resultDiv.innerHTML = '<p style="color: red;">Ошибка: ' + error.message + '</p>';
            }
        }

        async function testInterviewerAPI() {
            const resultDiv = document.getElementById('interviewer-result');
            resultDiv.innerHTML = 'Загрузка...';
            
            try {
                const response = await fetch('https://api.supermock.ru/api/slots/enhanced?role=interviewer&profession=frontend&language=ru&timezone=Asia/Vladivostok');
                const data = await response.json();
                
                let html = '<h3>Результат:</h3>';
                html += '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
                
                // Показываем слоты с кандидатами
                const slotsWithCandidates = data.slots.filter(slot => slot.count > 0);
                if (slotsWithCandidates.length > 0) {
                    html += '<h3>Слоты с кандидатами:</h3>';
                    slotsWithCandidates.forEach(slot => {
                        html += `<p><strong>${slot.time}</strong> (UTC: ${slot.utcTime}) - ${slot.count} кандидат(ов)</p>`;
                    });
                } else {
                    html += '<p><strong>Нет слотов с кандидатами!</strong></p>';
                }
                
                resultDiv.innerHTML = html;
            } catch (error) {
                resultDiv.innerHTML = '<p style="color: red;">Ошибка: ' + error.message + '</p>';
            }
        }
    </script>
</body>
</html>
