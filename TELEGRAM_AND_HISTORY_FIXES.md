# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Telegram Bot ID –∏ History

## üéØ **–ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:**

### 1. **‚ùå Missing required environment variables: ['VITE_TELEGRAM_BOT_ID']**

**–ü—Ä–æ–±–ª–µ–º–∞:** Frontend –Ω–µ –º–æ–≥ –Ω–∞–π—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `VITE_TELEGRAM_BOT_ID`

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π .env —Ñ–∞–π–ª (dev –≤–µ—Ä—Å–∏—è)

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π production.env –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp -i $HOME/.ssh/timeweb_vps_key production.env root@217.198.6.238:/opt/mockmate/.env

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞–ª–∏ frontend —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
pnpm deploy:frontend
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –û—à–∏–±–∫–∞ `Missing required environment variables` –∏—Å—á–µ–∑–ª–∞

### 2. **‚ùå ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ history**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ—Ç–∫—Ä—ã—Ç—å History —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞—Å—å –æ—à–∏–±–∫–∞ "ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω"

**–ü—Ä–∏—á–∏–Ω–∞:** 
- –ü–æ—Å–ª–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è demo —Ä–µ–∂–∏–º–∞ `userId` —Å—Ç–∞–ª —Ä–∞–≤–µ–Ω `0` –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- History –ø—Ä–æ–≤–µ—Ä—è–ª `if (!userId)`, –Ω–æ `0` –≤ JavaScript —Å—á–∏—Ç–∞–µ—Ç—Å—è falsy
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—ã—Ç–∞–ª–∞—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å `userId = 0`

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –ë—ã–ª–æ:
if (!userId) {
  setError(t('history.userIdNotFound'));
  setIsLoading(false);
  return;
}

// –°—Ç–∞–ª–æ:
if (!userId || userId === 0) {
  console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –≥–ª–∞–≤–Ω—É—é');
  navigate('/');
  return;
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

### 3. **üîß –°–æ–∑–¥–∞–Ω TelegramService –¥–ª—è –±—É–¥—É—â–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram –±–æ—Ç–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ Telegram —Å–æ–æ–±—â–µ–Ω–∏–π

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω `backend/src/services/telegramService.ts`
```typescript
export class TelegramService {
  async sendMessage(chatId: string | number, text: string): Promise<boolean>
  async notifyMatch(userIds: string[], sessionId: string, slotTime: string): Promise<void>
  async notifyReminder(userId: string, sessionId: string, slotTime: string, minutesBefore: number): Promise<void>
  async notifyCompletion(userId: string, sessionId: string): Promise<void>
  async notifyQueued(userId: string, role: string, slotTime: string): Promise<void>
}
```

**–°—Ç–∞—Ç—É—Å:** üîÑ –°–æ–∑–¥–∞–Ω –±–∞–∑–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å, —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å backend –ª–æ–≥–∏–∫–æ–π

## üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

### ‚úÖ **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
TELEGRAM_BOT_ID=8464088869
VITE_TELEGRAM_BOT_ID=8464088869
VITE_TELEGRAM_BOT_NAME=SuperMock_bot
NODE_ENV=production
```

### ‚úÖ **Frontend —Å–±–æ—Ä–∫–∞:**
- –ë–æ–ª—å—à–µ –Ω–µ—Ç –æ—à–∏–±–æ–∫ `Missing required environment variables`
- –í—Å–µ VITE –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ production
- –°–±–æ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### ‚úÖ **History —Å—Ç—Ä–∞–Ω–∏—Ü–∞:**
- –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é
- –ù–µ—Ç –æ—à–∏–±–æ–∫ "ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω"
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞—è `userId = 0`

## üõ†Ô∏è **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

### **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è .env:**
```bash
# –í deploy script –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
info "Ensuring .env is current before build..."
if [[ -f "production.env" ]]; then
    scp -i "${SSH_KEY}" -o StrictHostKeyChecking=no production.env "${USER_}@${SERVER}:${DEST}/.env" 2>/dev/null
fi
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**
```typescript
// –ü–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü, —Ç—Ä–µ–±—É—é—â–∏—Ö –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:
if (!userId || userId === 0) {
  navigate('/'); // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –≥–ª–∞–≤–Ω—É—é
  return;
}
```

## üéâ **–ò—Ç–æ–≥–∏:**

### ‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
1. **VITE_TELEGRAM_BOT_ID** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ frontend ‚úÖ
2. **History —Å—Ç—Ä–∞–Ω–∏—Ü–∞** —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ ‚úÖ  
3. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã ‚úÖ
4. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç** —É–ª—É—á—à–µ–Ω (—Ä–µ–¥–∏—Ä–µ–∫—Ç –≤–º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏) ‚úÖ

### üîÑ **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**
1. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å `TelegramService` –≤ matching –ª–æ–≥–∏–∫—É
2. –î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–µ—Å—Å–∏–π
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –¥–ª—è Telegram –±–æ—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã! –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.** üöÄ
