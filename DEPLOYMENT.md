# üöÄ –î–µ–ø–ª–æ–π SuperMock —Å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏

## üìã –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–æ–¥–¥–æ–º–µ–Ω–∞–º–∏ —á–µ—Ä–µ–∑ Traefik:

- **`landing.supermock.ru`** ‚Üí –õ–µ–Ω–¥–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- **`app.supermock.ru`** ‚Üí Frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ  
- **`api.supermock.ru`** ‚Üí Backend API

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°–µ—Ç–∏ Docker
- **`traefik-network`** - –æ–±—â–∞—è —Å–µ—Ç—å –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ (external)
- **`app_net`** - –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Ç—å –¥–ª—è frontend
- **`api_net`** - –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Ç—å –¥–ª—è backend
- **`database_net`** - –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Ç—å –¥–ª—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö
- ‚úÖ PostgreSQL –∏ Redis –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑–≤–Ω–µ (—Ç–æ–ª—å–∫–æ `expose`)
- ‚úÖ –ù–∞—Ä—É–∂—É —Ç–æ—Ä—á–∏—Ç —Ç–æ–ª—å–∫–æ Traefik (–ø–æ—Ä—Ç—ã 80/443)
- ‚úÖ Traefik –≤–∏–¥–∏—Ç —Å–µ—Ä–≤–∏—Å—ã —Ç–æ–ª—å–∫–æ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º `Host(...)`

## üöÄ –î–µ–ø–ª–æ–π

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π (GitHub Actions)
```bash
git push origin main
```

### –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π
```bash
# 1. –°–æ–∑–¥–∞—Ç—å –æ–±—â—É—é —Å–µ—Ç—å traefik-network
./scripts/create-traefik-network.sh

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π
./scripts/deploy-isolated-domains.sh
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
‚îú‚îÄ‚îÄ docker-compose.subdomains.yml    # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ landing.html                     # –õ–µ–Ω–¥–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ create-traefik-network.sh   # –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—â–µ–π —Å–µ—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ deploy-isolated-domains.sh  # –°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
‚îî‚îÄ‚îÄ .github/workflows/
    ‚îî‚îÄ‚îÄ deploy-isolated-domains.yml  # CI/CD pipeline
```

## üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã:

- **https://landing.supermock.ru** - –õ–µ–Ω–¥–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- **https://app.supermock.ru** - Frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- **https://api.supermock.ru** - Backend API
- **https://api.supermock.ru/api/health** - Health check

## üîê Telegram Auth API

- `POST /api/telegram-auth/send-code` - –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞
- `POST /api/telegram-auth/verify-code` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞  
- `GET /api/telegram-auth/me` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- `GET /api/telegram-auth/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

## üõ†Ô∏è –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –°–æ–∑–¥–∞—Ç—å —Å–µ—Ç—å traefik-network
docker network create traefik-network --driver bridge

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
docker-compose -f docker-compose.subdomains.yml up -d --build

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker ps --filter "name=supermock"
```

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –õ–æ–≥–∏ Traefik
docker logs supermock-traefik

# –õ–æ–≥–∏ Backend
docker logs supermock-backend

# –õ–æ–≥–∏ Frontend
docker logs supermock-frontend-app

# –õ–æ–≥–∏ Landing
docker logs supermock-landing
```

## üßπ –û—á–∏—Å—Ç–∫–∞

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose -f docker-compose.subdomains.yml down

# –£–¥–∞–ª–∏—Ç—å —Å–µ—Ç–∏ (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
docker network rm traefik-network
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–°–µ—Ç—å `traefik-network`** –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∞ –¥–æ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
2. **–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã** —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –ø–æ–¥–¥–æ–º–µ–Ω—ã
3. **–û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω `supermock.ru`** –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
4. **Nginx** –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω - –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Traefik
5. **–ü–æ—Ä—Ç—ã 80/443** –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ Traefik

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

- ‚úÖ **–ò–∑–æ–ª—è—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤** - –∫–∞–∂–¥—ã–π –≤ —Å–≤–æ–µ–π —Å–µ—Ç–∏
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑–≤–Ω–µ
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã
- ‚úÖ **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞** - –≤—Å–µ —á–µ—Ä–µ–∑ Traefik
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π SSL** - Let's Encrypt —á–µ—Ä–µ–∑ Traefik
