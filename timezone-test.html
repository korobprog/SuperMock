<!DOCTYPE html>
<html>
<head>
    <title>–¢–µ—Å—Ç —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .result { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        button { margin: 5px; padding: 10px; }
    </style>
</head>
<body>
    <h1>üîç –¢–µ—Å—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞</h1>
    
    <div class="result">
        <h3>üì± –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±—Ä–∞—É–∑–µ—Ä–µ:</h3>
        <p><strong>–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å –±—Ä–∞—É–∑–µ—Ä–∞:</strong> <span id="browser-timezone">–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è...</span></p>
        <p><strong>–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è:</strong> <span id="current-time">–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è...</span></p>
        <p><strong>User Agent:</strong> <span id="user-agent">–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è...</span></p>
    </div>

    <div class="result">
        <h3>üåê –¢–µ—Å—Ç API –∑–∞–ø—Ä–æ—Å–æ–≤:</h3>
        <button onclick="testAPI('Asia/Vladivostok')">–¢–µ—Å—Ç Asia/Vladivostok</button>
        <button onclick="testAPI('Europe/Moscow')">–¢–µ—Å—Ç Europe/Moscow</button>
        <button onclick="testAPI('auto')">–¢–µ—Å—Ç —Å –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º</button>
        <div id="api-results"></div>
    </div>

    <div class="result">
        <h3>üéØ –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞:</h3>
        <select id="timezone-select">
            <option value="Asia/Vladivostok">Asia/Vladivostok (UTC+10)</option>
            <option value="Europe/Moscow">Europe/Moscow (UTC+3)</option>
            <option value="Asia/Tokyo">Asia/Tokyo (UTC+9)</option>
            <option value="America/New_York">America/New_York (UTC-5)</option>
        </select>
        <button onclick="setTimezone()">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å</button>
        <div id="manual-results"></div>
    </div>

    <script>
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å –±—Ä–∞—É–∑–µ—Ä–∞
        function detectTimezone() {
            const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            const now = new Date();
            
            document.getElementById('browser-timezone').textContent = timezone;
            document.getElementById('current-time').textContent = now.toLocaleString();
            document.getElementById('user-agent').textContent = navigator.userAgent;
            
            console.log('üåç –û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å:', timezone);
            return timezone;
        }

        // –¢–µ—Å—Ç–∏—Ä—É–µ–º API
        async function testAPI(timezone) {
            const resultsDiv = document.getElementById('api-results');
            const actualTimezone = timezone === 'auto' ? detectTimezone() : timezone;
            
            resultsDiv.innerHTML = `<p>üîÑ –¢–µ—Å—Ç–∏—Ä—É–µ–º ${actualTimezone}...</p>`;
            
            try {
                const response = await fetch(`https://api.supermock.ru/api/slots/enhanced?role=candidate&profession=frontend&language=ru&timezone=${encodeURIComponent(actualTimezone)}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                
                let html = `<div class="success">`;
                html += `<h4>‚úÖ –£—Å–ø–µ—à–Ω–æ –¥–ª—è ${actualTimezone}:</h4>`;
                html += `<p><strong>–í—Å–µ–≥–æ —Å–ª–æ—Ç–æ–≤:</strong> ${data.slots.length}</p>`;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–æ—Ç—ã —Å –∏–Ω—Ç–µ—Ä–≤—å—é–µ—Ä–∞–º–∏
                const slotsWithInterviewers = data.slots.filter(slot => slot.count > 0);
                if (slotsWithInterviewers.length > 0) {
                    html += `<p><strong>–°–ª–æ—Ç—ã —Å –∏–Ω—Ç–µ—Ä–≤—å—é–µ—Ä–∞–º–∏:</strong></p>`;
                    slotsWithInterviewers.forEach(slot => {
                        html += `<p>‚Ä¢ ${slot.time} (UTC: ${slot.utcTime}) - ${slot.count} –∏–Ω—Ç–µ—Ä–≤—å—é–µ—Ä(–æ–≤)</p>`;
                    });
                } else {
                    html += `<p><strong>–ù–µ—Ç —Å–ª–æ—Ç–æ–≤ —Å –∏–Ω—Ç–µ—Ä–≤—å—é–µ—Ä–∞–º–∏</strong></p>`;
                }
                
                html += `</div>`;
                resultsDiv.innerHTML = html;
                
            } catch (error) {
                resultsDiv.innerHTML = `<div class="error"><h4>‚ùå –û—à–∏–±–∫–∞ –¥–ª—è ${actualTimezone}:</h4><p>${error.message}</p></div>`;
            }
        }

        // –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞
        function setTimezone() {
            const selectedTimezone = document.getElementById('timezone-select').value;
            const resultsDiv = document.getElementById('manual-results');
            
            resultsDiv.innerHTML = `<p>üîÑ –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å ${selectedTimezone}...</p>`;
            
            // –ò–º–∏—Ç–∏—Ä—É–µ–º –∑–∞–ø—Ä–æ—Å —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —á–∞—Å–æ–≤—ã–º –ø–æ—è—Å–æ–º
            testAPI(selectedTimezone);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.onload = function() {
            detectTimezone();
            console.log('üöÄ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é');
        };
    </script>
</body>
</html>
