# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é Super Mock

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–æ–±–ª–µ–º–∞**: –û—à–∏–±–∫–∞ 500 –ø—Ä–∏ `/api/slots/join` –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–π –∫–æ–ª–æ–Ω–∫–∏ `title_key`
- **–†–µ—à–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã Prisma —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 2. –ü—Ä–æ–±–ª–µ–º—ã —Å WebSocket
- **–ü—Ä–æ–±–ª–µ–º–∞**: `WebSocket connection to 'wss://api.supermock.ru/socket.io/...' failed`
- **–†–µ—à–µ–Ω–∏–µ**: –£–ª—É—á—à–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CORS –∏ Socket.IO
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å CORS
- **–ü—Ä–æ–±–ª–µ–º–∞**: `Access to fetch at 'https://api.supermock.ru/api/profile' from origin 'https://supermock.ru' has been blocked by CORS policy`
- **–†–µ—à–µ–Ω–∏–µ**: –£–ª—É—á—à–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CORS —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π preflight –∑–∞–ø—Ä–æ—Å–æ–≤
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–î–æ–±–∞–≤–ª–µ–Ω–æ**: –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ –ë–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å —ç—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –¥–µ–ø–ª–æ—è

### –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
bash scripts/deploy/deploy-interactive.sh
# –í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é 3 (–û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ –±—ç–∫–µ–Ω–¥)
```

### –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
```bash
bash scripts/deploy/fix-database.sh
```

### –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å WebSocket
```bash
bash scripts/deploy/fix-websocket.sh
```

### –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å CORS
```bash
bash scripts/deploy/fix-cors.sh
```

### –î–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
```bash
bash scripts/deploy/health-check.sh
```

## üîß –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö –¥–µ–ø–ª–æ—è
- **`deploy-backend.sh`**: –¢–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å—Ö–µ–º—É –ë–î –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç WebSocket
- **`deploy-all.sh`**: –í–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **`deploy-interactive.sh`**: –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –æ–ø—Ü–∏–∏ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

### –ù–æ–≤—ã–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
- **`fix-database.sh`**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **`fix-websocket.sh`**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å WebSocket
- **`fix-cors.sh`**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å CORS
- **`health-check.sh`**: –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã

### –£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ API (–ª–æ–∫–∞–ª—å–Ω—ã–π –∏ –≤–Ω–µ—à–Ω–∏–π)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ WebSocket endpoint
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ Redis
- –ü—Ä–æ–≤–µ—Ä–∫–∞ Traefik
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- ‚ùå –û—à–∏–±–∫–∞ 500 –ø—Ä–∏ `/api/slots/join`
- ‚ùå WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏
- ‚ùå CORS –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –∑–∞–ø—Ä–æ—Å—ã —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- ‚ùå –ù—É–∂–Ω–æ –±—ã–ª–æ –≤—Ä—É—á–Ω—É—é –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- ‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã
- ‚úÖ –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã

## üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:
- **üåê –°–∞–π—Ç**: https://supermock.ru
- **üîó API**: https://api.supermock.ru
- **üîß WebSocket**: wss://api.supermock.ru/socket.io/

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è

### –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–æ–¥ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É: `ssh dokploy-server "echo 'OK'"`

### –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤: `bash scripts/deploy/health-check.sh`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API: `curl -s https://api.supermock.ru/api/health | jq .`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∞–π—Ç: `curl -I https://supermock.ru`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å WebSocket: `curl -s "https://api.supermock.ru/socket.io/?EIO=4&transport=polling"`

### –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É: `bash scripts/deploy/health-check.sh`
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö: `bash scripts/deploy/fix-database.sh`
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å WebSocket: `bash scripts/deploy/fix-websocket.sh`
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å CORS: `bash scripts/deploy/fix-cors.sh`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `ssh dokploy-server "docker logs supermock-backend --tail 20"`

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
- ‚úÖ –ù–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã (Traefik, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `scripts/deploy/README.md`
- **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `scripts/deploy/README-IMPROVED.md`
- **–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ**: `DEPLOYMENT_GUIDE.md`

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –¥–µ–ø–ª–æ—è —Ç–µ–ø–µ—Ä—å:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É
- ‚úÖ –£–ø—Ä–æ—â–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è
- ‚úÖ –°–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ –æ—à–∏–±–æ–∫
- ‚úÖ –£—Å–∫–æ—Ä—è–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø—Ä–æ–±–ª–µ–º

**–í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:**
```bash
bash scripts/deploy/deploy-interactive.sh
```

–ò –≤—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—É—é –æ–ø—Ü–∏—é. –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏! üöÄ
